Employee REST server
---

## Introduction
Simple Employees application (as outlayed in the [spec.md](spec.md)) built in Java Spring

## Dependencies
In order to run this server, you will need:
- [Docker](https://www.docker.com) or
- Java11 and gradle

## Getting Started
- To start up the server simply run the `run.sh` script which will build and run the server in docker

```
usage: ./run.sh options
    Runs employees api
    OPTIONS:
    -h      Show this message
    -f      Data file to ingest use absolute path (ex run.sh -f <absolute-path-to-file>)
    -g      Auto generate given # of employees (ex. run.sh -g 100)
```

- The following options are available:
  - You can pass in your own custom data seed file `run.sh -d <path-to-csv>`
    - Please note the file must be in a csv and in the following format:

    ```csv
    ID,FirstName,MiddleInitial,LastName,DateOfBirth,DateOfEmployment,Status
    3177f8ad-a1b0-4b54-bb98-eff24c203c18,Shera,O,Medina,1991-02-02,2009-07-20,ACTIVE
    ... 
    ```  

  - Alternatively, you can have a file autogenerated by running `run.sh -g <number-employees-to-generate>`

- The server can be found at <http://localhost:8080>
- Or you can run it straight via java:
  - `gradle build && java -jar build/api-1.0.0.jar [options]`
    - Where options are:
      - `--generate-data=<number-employees-to-generate>`
      - `--data-file=<path-to-csv>`
        - See csv spec above

## API Docs
The api docs can be viewed in the [openapi.yaml](openapi.yaml).  All endpoints require an Authorization header of bearer token, which can be retrieved as outlined below.

The employees api is available at `http://localhost:8080/api/employees`

## How to request a token

```sh
curl -X POST -H 'Content-Type: application/x-www-form-urlencoded' -d 'scope=read&grant_type=client_credentials&client_id=test-client' http://test-client:test-secret@localhost:8080/oauth/token
```

## Running tests

To run tests: `gradle test` or via docker `docker build .`

